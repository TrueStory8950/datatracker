{% extends "base.html" %}
{# Copyright The IETF Trust 2015-2023, All Rights Reserved #}
{% load origin static django_bootstrap5 tz %}
{% block title %}
    {% if agenda_sp %}
        Revise
    {% else %}
        Upload
    {% endif %}
    Agenda for {{ session.meeting }} : {{ session.group.acronym }}
{% endblock %}
{% block content %}
    {% origin %}
    <h1>
        {% if agenda_sp %}
            Revise
        {% else %}
            Upload
        {% endif %}
        Agenda for {{ session.meeting }}
        <br>
        <small class="text-body-secondary">{{ session.group.acronym }}
            {% if session.name %}: {{ session.name }}{% endif %}
        </small>
    </h1>
    {% if session_number %}
        <h2>Session {{ session_number }} : {{ session.official_timeslotassignment.timeslot.time|timezone:session.meeting.time_zone|date:"D M-d-Y Hi" }}</h2>
    {% endif %}
    <form enctype="multipart/form-data" method="post" class="my-3">
        {% csrf_token %}
        {% bootstrap_form form %}
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
{% endblock %}
{% block js %}
    <script>$(document)
    .ready(function () {
        var form = $("form.my-3");

        // review submission selection
        form.find("[name=submission_method]")
            .on("click change", function () {
                var val = form.find("[name=submission_method]:checked")
                    .val();

                var shouldBeVisible = {
                    upload: ['[name="file"]'],
                    enter: ['[name="content"]']
                };

                for (var v in shouldBeVisible) {
                    for (var i in shouldBeVisible[v]) {
                        var selector = shouldBeVisible[v][i];
                        var row = form.find(selector);
                        if ($.inArray(selector, shouldBeVisible[val]) != -1)
                            row.show();
                        else
                            row.hide();
                    }
                }
            })
            .trigger("change");
    });</script>
{% endblock %}